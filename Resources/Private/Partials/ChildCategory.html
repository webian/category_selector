{namespace adwlm=ADWLM\CategorySelector\ViewHelpers}

<f:if condition="{nextLevel} == 1">
    <f:then>
        <div class="btn-group">
            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                {childCategory.title} <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
                <f:render partial="ChildCategoryRecursion" arguments="{
                    categoryTree : categoryTree,
                    selectedCategories : selectedCategories,
                    currentCategory : childCategory,
                    currentLevel : nextLevel,
                    stopRecursionOnLevel : stopRecursionOnLevel}"
                />
            </ul>
        </div>
    </f:then>
    <f:else>
        <f:if condition="{nextLevel} == 2">
            <li class="level{nextLevel} {f:if(condition:'{adwlm:InArrayExplode(needle : childCategory.uid, haystack : selectedCategories)}', then : 'selected', else : 'no')}"><a href="#">{childCategory.title}</a></li>
        </f:if>
    </f:else>
</f:if>
